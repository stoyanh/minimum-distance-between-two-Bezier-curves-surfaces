<html>

<head>

</head>

<body>
    <input id="myInput" type="file" style="visibility:hidden" />
    <script src="js/three.js"></script>
    <script src="js/dat.gui.min.js"></script>
    <script src="js/BezierCurve.js"></script>
    <script src="js/OrbitControls.js"></script>
    <script src="js/gjk.js"></script>
    <script src="js/main_algorithm.js"></script>

    <script>
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setClearColor(0xEEEEEE);
        document.body.appendChild(renderer.domElement);
        camera.position.set(0, 0, 25);

        let controls = new THREE.OrbitControls(camera, renderer.domElement);
        controls.listenToKeyEvents(window); // optional
        controls.screenSpacePanning = false;
        controls.maxPolarAngle = Math.PI / 2;
        window.addEventListener('resize', onWindowResize);

        let curves = [];

        function onWindowResize() {

            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);

        }

        function clear_scene() {
            while (scene.children.length > 0) {
                scene.remove(scene.children[0]);
            }
        }

        function render_scene() {
            renderer.render(scene, camera);
        }

        function add_curve(control_points, color = 0xff0000, lines_color = 0xff00aa) {
            const curve = new BezierCurve(control_points);
            curves.push(curve);
            curve.addToScene(scene, true, color, lines_color);
        }

        function animate() {
            requestAnimationFrame(animate);
            render_scene();
        }

        add_curve([new THREE.Vector3(-10, 0, 0),
        new THREE.Vector3(-5, 15, 0),
        new THREE.Vector3(20, 15, 0),
        new THREE.Vector3(10, 0, 0)], 0x32CD32, 0x0000FF);

        add_curve([new THREE.Vector3(-20, 0, 0),
        new THREE.Vector3(-10, 5, 0),
        new THREE.Vector3(10, 5, 0),
        new THREE.Vector3(23, 5, 0)]);

        //file loader
        const gui = new dat.GUI({ width: 310 });
        const params = {
            loadFile: function () {
                document.getElementById('myInput').click();
            }
        };

        gui.add(params, 'loadFile').name("Load");


        animate();

    </script>
</body>

</html>